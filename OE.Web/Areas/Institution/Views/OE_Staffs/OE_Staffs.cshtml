
@model OE.Web.Areas.Institution.Models.IndexOE_StaffsVM

@{
    Layout = "~/Areas/Institution/Views/Shared/_LayoutMain.cshtml";
    ViewData["Title"] = "OE_Staff";
}


<h1 class="page-title">All Staffs</h1>
<br />
<button class="btn btn-success btn-sm " id="btnAddOE_Staff" name="btnAddOE_Staff" data-toggle="modal" data-target="#mdlAddOE_Staff">
    <span class="glyphicon glyphicon-plus" style="vertical-align:middle;margin-top: -5px"></span>
    New
</button>


<br />
<br />

<div class="table-responsive">
    <table class="table table-bordered table-hover">

        <thead>
            <tr>
                <th>Name</th>
                <th> Staff Type </th>
                <th> Designation </th>
                <th>Action</th>

            </tr>
        </thead>
        <tbody>

            @foreach (var data in Model._OE_StaffVM)
            {
                <tr>


                    <td class="showDetails pointer"><img id="IP300X200" src="~/@data.IP300X200" style="height:80px;width:80px;" /><br />@data.FirstName @data.LastName</td>
                    <td class="showDetails pointer">@data.StaffTypeName</td>
                    <td class="showDetails pointer">@data.Designation</td>
                    <td>
                        <button class="btn btn-primary btn-sm" id="btnEdit" name="btnEdit" data-toggle="modal" data-target="#modalEdit"
                                data-id="@data.Id"
                                data-firstname="@data.FirstName"
                                data-lastname="@data.LastName"
                                data-stafftypeid="@data.StaffTypeId"
                                data-email="@data.Email"
                                data-designation="@data.Designation"
                                data-present="@data.PresentAddress"
                                data-permanent="@data.PermanentAddress"
                                data-contact="@data.Contact"
                                data-ip300x200="@data.IP300X200">
                            <span class="glyphicon glyphicon-edit" style="vertical-align:middle;margin-top: -5px"></span>
                            Edit
                        </button>

                        <button class="btn btn-danger btn-sm " id="btnDelete" name="btnDelete" data-toggle="modal" data-target="#modalDelete" data-id="@data.Id">
                            <span class="glyphicon glyphicon-trash" style="vertical-align:middle;margin-top: -5px"></span>
                            Delete
                        </button>
                    </td>

                </tr>
            }

        </tbody>
    </table>

</div>

<!-- #region "All Modals" -->
<div id="mdlAddOE_Staff" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3>Add Staff</h3>
            </div>
            <div class="modal-body">

                <form enctype="multipart/form-data">

                    <label>First Name:</label>
                    <input type="text" name="txtAddFirstName" id="txtAddFirstName" required class="form-control">
                    <label>Last Name:</label>
                    <input type="text" name="txtAddLastName" id="txtAddLastName" required class="form-control">
                    <br />
                    
                    <label>Image</label>
                    
                    <input type="file" id="fleAddIP600X400" name="fleAddIP600X400" class="form-control">
                    <br />
                    <img id="addImage" alt="titleImage" style="display:none" height="150" width="200" />
                    <br />
                    <label>Staff Type:</label>
                    @Html.DropDownList("ddlAddOE_StaffId", Model._OE_StaffTypeList, "--- Select ---", new { @class = "form-control" })
                    <label>Email</label>
                    <input type="text" name="Email" id="Email" required class="form-control">
                    <label>Designation</label>
                    <input type="text" name="Designation" id="Designation" required class="form-control">
                    <label>Present Address</label>
                    <input type="text" name="PresentAddress" id="PresentAddress" required class="form-control">
                    <label>Permanent Address</label>
                    <input type="text" name="PermanentAddress" id="PermanentAddress" required class="form-control">
                    <label>Contact</label>
                    <input type="text" name="Contact" id="Contact" required class="form-control">
                    <hr />

                    <button class="btn btn-success btn-md" formmethod="post"
                            asp-controller="OE_Staffs"
                            asp-action="Add"
                            asp-route-txtAddFirstName="txtAddFirstName"
                            asp-route-txtAddLastName="txtAddLastName"
                            asp-route-ddlAddOE_StaffId="ddlAddOE_StaffId"
                            asp-route-Email="Email"
                            asp-route-Designation="Designation"
                            asp-route-PresentAddress="PresentAddress"
                            asp-route-PermanentAddress="PermanentAddress"
                            asp-route-Contact="Contact"
                            asp-route-fleAddIP600X400="fleAddIP600X400">
                        <span class="glyphicon glyphicon-ok" style="vertical-align:middle;margin-top: -5px"></span>
                        Save
                    </button>
                    <button class="btn btn-danger btn-md " data-dismiss="modal">
                        <span class="glyphicon glyphicon-remove" style="vertical-align:middle; margin-top: -5px"></span>
                        Cancel
                    </button>

                </form>

            </div>

        </div>

    </div>
</div>

<div id="modalEdit" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Staff</h4>
            </div>
            <div class="modal-body">
                <form enctype="multipart/form-data">
                    <input type="hidden" name="editOE_StaffId" id="editOE_StaffId">
                    <label>First Name:</label>
                    <input type="text" name="txtEditFirstName" id="txtEditFirstName" required class="form-control">
                    <label>Last Name:</label>
                    <input type="text" name="txtEditLastName" id="txtEditLastName" required class="form-control">
                    <br />                   
                    <label>Image</label>
                    <input type="file" id="fleEditIP600X400" name="fleEditIP600X400" class="form-control" />

                    <br />
                    <img id="editImage" alt="titleImage" height="150" width="200" />
                    <br />
                    <label>Staff Type:</label>
                    @Html.DropDownList("ddlEditOE_StaffTypeId", Model._OE_StaffTypeList, "--- Select ---", new { @class = "form-control" })
                    <label>Email</label>
                    <input type="text" name="editEmail" id="editEmail" required class="form-control">
                    <label>Designation</label>
                    <input type="text" name="editDesignation" id="editDesignation" required class="form-control">
                    <label>Present Address</label>
                    <input type="text" name="editPresentAddress" id="editPresentAddress" required class="form-control">
                    <label>Permanent Address</label>
                    <input type="text" name="editPermanentAddress" id="editPermanentAddress" required class="form-control">
                    <label>Contact</label>
                    <input type="text" name="editContact" id="editContact" required class="form-control">
                    <hr />
                    <button class="btn btn-success btn-md" formmethod="post"
                            asp-controller="OE_Staffs"
                            asp-action="Edit"
                            asp-route-editOE_StaffId="editOE_StaffId"
                            asp-route-txtEditFirstName="txtEditFirstName"
                            asp-route-txtEditLastName="txtEditLastName"
                            asp-route-ddlEditOE_StaffTypeId="ddlEditOE_StaffTypeId"
                            asp-route-editEmail="editEmail"
                            asp-route-editDesignation="editDesignation"
                            asp-route-editPresentAddress="editPresentAddress"
                            asp-route-editPermanentAddress="editPermanentAddress"
                            asp-route-editContact="editContact"
                            asp-route-fleEditIP600X400="fleEditIP600X400">
                        <span class="glyphicon glyphicon-ok" style="vertical-align:middle;margin-top: -5px"></span>
                        Save
                    </button>
                    <button class="btn btn-danger btn-md " data-dismiss="modal">
                        <span class="glyphicon glyphicon-remove" style="vertical-align:middle; margin-top: -5px"></span>
                        Cancel
                    </button>

                </form>

            </div>

        </div>

    </div>
</div>

<div id="modalDelete" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Delete Staff</h4>
            </div>

            <div class="modal-body">
                <p><h3>Are you sure you want to delete this?</h3></p>

            </div>
            <div class="modal-footer">
                <form class="form-inline" role="form">
                    <input type="hidden" name="deleteOE_StaffID" id="deleteOE_StaffID">

                    <button class="btn btn-success btn-md" formmethod="post"
                            asp-controller="OE_Staffs"
                            asp-action="Delete"
                            asp-route-deleteOE_StaffID="deleteOE_StaffID">
                        <span class="glyphicon glyphicon-ok" style="vertical-align:middle;margin-top: -5px"></span>
                        Yes
                    </button>
                    <button class="btn btn-danger btn-md " data-dismiss="modal">
                        <span class="glyphicon glyphicon-remove" style="vertical-align:middle; margin-top: -5px"></span>
                        No
                    </button>
                </form>
            </div>

        </div>
    </div>
</div>
<!-- #endregion  "All Modals"-->
<!-- #region "All Scripts" -->

@section Scripts
    {

    <script type="text/javascript">
        $('tr td #btnEdit').on('click', function () {
            $("#editOE_StaffId").val($(this).data("id"));
            $("#txtEditFirstName").val($(this).data("firstname"));
            $("#txtEditLastName").val($(this).data("lastname"));
            $("#ddlEditOE_StaffTypeId").val($(this).data("stafftypeid"));
            $("#editEmail").val($(this).data("email"));
            $("#editDesignation").val($(this).data("designation"));
            $("#editPresentAddress").val($(this).data("present"));
            $("#editPermanentAddress").val($(this).data("permanent"));
            $("#editContact").val($(this).data("contact"));
            //Assinging image location with slash.
            var i = "/" + $(this).data('ip300x200');
            $('#editImage').attr('src', i);
        });

        $('tr td #btnDelete').on('click', function () {
            $("#deleteOE_StaffID").val($(this).data("id"));
        });

        $('#fleAddIP600X400').on('change', function () {
            var t = window.URL.createObjectURL(this.files[0]);
            $('#addImage').attr('src', t);
            $('#addImage').show();
        });
        $('#fleEditIP600X400').on('change', function () {
            var t = window.URL.createObjectURL(this.files[0]);
            $('#editImage').attr('src', t);
        });

    </script>
}

<!-- #endregion  "All Scripts"-->
